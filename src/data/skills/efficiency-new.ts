import { Skill } from '@/lib/types';

export const efficiencyNewSkills: Skill[] = [
    {
        id: 'sop-generator',
        name: 'SOP（標準作業手順書）作成',
        description: '業務手順をヒアリングしてSOP形式に構造化。フローチャート的な分岐条件やチェックリスト付き。',
        longDescription: '口頭やメモレベルの業務手順を、誰でも再現できるSOP（標準作業手順書）に変換します。分岐条件の記述、チェックリスト、注意事項、所要時間の目安まで含めた実用的なドキュメントを生成。業務の属人化解消に効果的です。',
        category: 'バックオフィス',
        iconName: 'ClipboardList',
        author: 'Eudaimonia',
        version: '1.0.0',
        content: `# SOP（標準作業手順書）作成

## このスキルについて
業務手順をヒアリングし、誰でも再現できるSOP（Standard Operating Procedure）形式に構造化するスキルです。口頭説明やメモレベルの情報から、分岐条件・チェックリスト・注意事項を含む実用的なSOPドキュメントを生成します。

## 適用タイミング
ユーザーが業務手順書・マニュアル・SOPの作成を依頼したとき。または「業務を引き継げるようにしたい」「属人化を解消したい」といった依頼のとき。

## SOP設計ルール

### 文書構成
SOPは以下の構成で作成すること。
1. **文書情報**（タイトル・作成日・バージョン・作成者・承認者）
2. **目的と適用範囲**（この手順書が対象とする業務と範囲）
3. **前提条件**（必要な権限・ツール・事前準備）
4. **手順本体**（ステップバイステップの手順）
5. **分岐条件**（IF-THENで記述する条件分岐）
6. **チェックリスト**（完了確認用）
7. **トラブルシューティング**（よくある問題と対処法）
8. **改訂履歴**（テンプレート）

### 手順記述の原則
- 1ステップ=1アクション。複数のアクションを1ステップに詰め込まない
- 動詞で始める（「○○を開く」「○○に入力する」「○○を確認する」）
- 具体的なボタン名・画面名・メニュー名を明記する
- スクリーンショットの挿入箇所を【画像: ○○の画面】で指示する
- 所要時間の目安を各ステップに付記する

### 分岐条件の記述
- 条件分岐は「IF ○○の場合 → ステップXへ」の形式で記述
- 分岐は2段階まで。3段階以上のネストは別手順書に分離する
- 分岐図をテキストベースのフローで視覚化する

### チェックリスト設計
- 各大項目の完了時にチェックする項目を設定
- 「確認者」欄を設けてダブルチェック体制を想定
- ミスが起きやすいポイントには⚠マークを付記

### トーンと表現
- 新入社員でも理解できる平易な表現を使用する
- 専門用語には（）で補足説明を付ける
- 禁止事項は「○○しないこと」と明確に記述する

## 出力フォーマット
Markdown形式で出力。以下を必ず含むこと。
- 文書ヘッダー（タイトル・バージョン・作成日）
- 手順（番号付きリスト）
- 分岐条件（IF-THEN形式）
- チェックリスト（チェックボックス形式）
- トラブルシューティング（Q&A形式）

## 事前確認
以下が不明な場合はSOP作成前に確認すること。
- 対象業務の概要（何をする手順か）
- 現在の手順の流れ（ざっくりでOK）
- 対象読者（新人？外注？自分の備忘？）
- 使用ツール・システム`,
        tags: ['SOP', 'マニュアル', '手順書', '属人化解消', '業務改善'],
        timeSaved: '40分/回',
        difficulty: 'ふつう',
        examples: [{
            title: '請求書発行のSOP作成',
            context: '毎月の請求書発行業務を外注スタッフに引き継ぐためのSOP作成',
            input: '毎月の請求書発行を外注さんに引き継ぎたいです。今は自分がfreeeで手作業でやってます。月末にクライアントごとの稼働時間をスプレッドシートで集計して、freeeで請求書を作って、PDFでメール送付してます。クライアントは10社くらい。振込期限は翌月末。',
            output: `# SOP: 月次請求書発行業務

| 項目 | 内容 |
|------|------|
| 文書番号 | SOP-FIN-001 |
| バージョン | 1.0 |
| 作成日 | 2026年○月○日 |
| 作成者 | （あなたの名前） |
| 承認者 | ― |
| 次回見直し | 2026年○月○日 |

---

## 1. 目的と適用範囲

**目的**: 毎月の請求書を正確かつ期限通りにクライアントへ送付すること。

**適用範囲**: 全クライアント（約10社）の月次請求書発行業務。

**実施タイミング**: 毎月最終営業日〜翌月第2営業日

---

## 2. 前提条件

- [ ] freeeへのログインアカウントを持っていること
- [ ] 稼働時間集計スプレッドシートへのアクセス権があること
- [ ] クライアント別単価表（スプレッドシートのタブ「単価表」）を確認済みであること
- [ ] メール送信用のテンプレートを確認済みであること

---

## 3. 手順

### ステップ1: 稼働時間の集計（目安: 30分）
1. Googleスプレッドシート「稼働時間管理」を開く
2. 当月のシートを選択する
3. クライアントごとの合計稼働時間をタブ「月次集計」に転記する
4. ⚠ 転記後、各クライアントの合計時間が元データと一致しているか確認する

### ステップ2: 請求金額の算出（目安: 15分）
1. タブ「単価表」でクライアントごとの時間単価を確認する
2. 稼働時間 × 単価 = 請求金額 を算出する
3. 消費税（10%）を加算する

**IF** 単価が変更されている場合 → 社長に確認してからステップ3へ進む
**IF** 稼働時間が0のクライアントがある場合 → そのクライアントはスキップ

### ステップ3: freeeで請求書作成（目安: 1社あたり5分）
1. freeeにログインする
2. 「取引」→「請求書」→「新規作成」を選択
3. 取引先名をプルダウンから選択する
4. 品目に「業務委託費 ○月分」と入力
5. 数量に稼働時間、単価に時間単価を入力
6. 振込期限を「翌月末日」に設定
7. 【画像: freee請求書作成画面】
8. プレビューで金額・宛名・振込先を確認
9. ⚠ 振込先口座が正しいか必ず確認（過去に口座違いの事故あり）
10. 「PDF出力」をクリックしてダウンロード

### ステップ4: メール送付（目安: 1社あたり3分）
1. メールテンプレート（下記参照）を使用
2. 宛先・金額・振込期限を書き換える
3. PDFを添付する
4. ⚠ 送信前にTo・CC・添付ファイルを最終確認
5. 送信する

---

## 4. チェックリスト

- [ ] 全クライアントの稼働時間を集計した
- [ ] 集計値と元データの一致を確認した
- [ ] 全クライアントの請求書をfreeeで作成した
- [ ] 金額・振込先・期日をダブルチェックした
- [ ] 全クライアントにメール送付した
- [ ] 送信済みメールのフォルダに全件あることを確認した
- [ ] 完了報告を社長に送った

---

## 5. トラブルシューティング

**Q: freeeにログインできない**
A: パスワードリセットを試す。それでもダメな場合は社長に連絡。

**Q: クライアントの単価がわからない**
A: スプレッドシートのタブ「単価表」を確認。記載がなければ社長に確認。

**Q: メールが返ってきた（バウンス）**
A: クライアントの担当者変更の可能性あり。社長に報告して代替の連絡先を確認。`
        }],
        promptTemplate: `あなたは業務改善コンサルタントです。以下の業務手順をSOP（標準作業手順書）形式に構造化してください。

## 入力情報
- 業務名: [例: 毎月の請求書発行業務]
- 現在の手順（ざっくりでOK）: [例: 月末にスプレッドシートで集計→freeeで請求書作成→PDFでメール送付]
- 使用ツール: [例: Googleスプレッドシート、freee、Gmail]
- 対象読者: [例: 外注スタッフ（業務未経験）]
- よくあるミスやトラブル: [例: 振込先口座の選択ミス、消費税区分の誤り]

## 出力形式
1. 文書情報（タイトル・バージョン・作成日）
2. 目的と適用範囲
3. 前提条件（必要な権限・ツール）
4. 手順本体（番号付きステップ、各ステップに所要時間付き）
5. 分岐条件（IF-THEN形式）
6. チェックリスト（完了確認用）
7. トラブルシューティング（Q&A形式）

## ルール
- 1ステップ=1アクション。動詞で始める
- 具体的なボタン名・画面名を明記する
- スクリーンショット挿入箇所を【画像: ○○】で指示する
- ミスが起きやすいポイントには警告マークを付ける`,
        steps: [
            { number: 1, title: '業務の流れを口頭で説明する気持ちで書く', description: '現在やっている手順を、普段人に説明するようにざっくりと書き出します。完璧でなくてOKです' },
            { number: 2, title: 'プロンプトに入力して送信', description: 'テンプレートの[ ]を埋めてAIに送信。よくあるミスは必ず記載してください' },
            { number: 3, title: '生成されたSOPを検証', description: '実際に手順通りにやってみて、抜けている操作やわかりにくい表現がないか確認します' },
            { number: 4, title: 'NotionやWikiに掲載', description: '確認済みのSOPをチームのドキュメント管理ツールに掲載し、関係者に共有します' },
        ],
        useCases: [
            '業務を外注スタッフやアルバイトに引き継ぐとき',
            '属人化している業務を標準化したいとき',
            '業務の引き継ぎ資料を短時間で作りたいとき',
        ],
        tips: [
            '完璧なSOPを最初から目指さない。まず「ざっくり版」を作り、実際に使いながらブラッシュアップするのが効率的',
            'よくあるミスやトラブルを入力に含めると、チェックポイントや注意書きが自動で盛り込まれる',
            '作成後に「このSOPで新人が迷いそうなポイントはどこですか？」と聞くと、改善すべき箇所が見える',
        ],
    },
];
